#_start:

# ori                r10, r0, <0,8,0,3,4>      # First memory bank, first channel, eight bank group
# <0,8,0,3,4> = 0x8034
 lli                r10, 0x8034

# ori                r11, r0, <0,8,1,3,4>      # First memory bank, second channel, eight bank group
# <0,8,1,3,4> = 0x8134
 lli                r11, 0x8134

 setchmapi          0,   r10                  # Set instruction fetch channel to memory bank
 setchmapi          1,   r11                  # Set data fetch channel to memory bank

# ori                r0,  r0, 0x00340103 -> 0  # Configuration command: General purpose cache, eight banks
 lui                r12, 0x0034
 lli                r12, 0x0103
 addu               r0,  r12, r0        -> 0

# ori                r0,  r0, 0x01000000 -> 0  # Table update command instruction fetch channel
 lui                r13, 0x0100
 addu               r0,  r13, r0        -> 0

# ori                r0,  r0, <0,0,1>    -> 0  # IPK cache of first core
 lli                r14, 0x0100
 addu               r0,  r14, r0        -> 0

# ori                r0,  r0, 0x01000000 -> 1  # Table update command data fetch channel
 addu               r0,  r13, r0        -> 1

# ori                r0,  r0, <0,0,2>    -> 1  # First data channel of first core
 addu               r0,  r14, r14       -> 1

# or                 r0,  ch0, r0              # Wait for memory configuration to complete
 or                 r0,  r2,  r0

 fetchr.eop         0x1000                    # Fetch first instruction packet of program
