#_start:

# <0,8,0,3,4> = 0x8034 (First memory bank, first channel, eight bank group)
 lli                r20, (0,8,0,3,4)

# <0,8,1,3,4> = 0x8134 (First memory bank, second channel, eight bank group)
 lli                r21, (0,8,1,3,4)

 setchmapi          0,   r20                  # Set instruction fetch channel to memory bank
 setchmapi          1,   r21                  # Set data fetch channel to memory bank

# ori                r0,  r0, 0x00340103 -> 0  # Configuration command: General purpose cache, eight banks
 lli                r22, 0x0103
 lui                r22, 0x0034
 addu               r0,  r22, r0        -> 0

# ori                r0,  r0, 0x01000000 -> 0  # Table update command instruction fetch channel
 lui                r23, 0x0100
 addu               r0,  r23, r0        -> 0

 lli                r24, (0,0,1)              # IPK cache of first core
 addu               r0,  r24, r0        -> 0

# ori                r0,  r0, 0x01000000 -> 1  # Table update command data fetch channel
 addu               r0,  r23, r0        -> 1

# ori                r0,  r0, <0,0,2>    -> 1  # First data channel of first core
 addu               r0,  r24, r24       -> 1

# or                 r0,  ch0, r0              # Wait for memory configuration to complete
 or                 r0,  r2,  r0

 fetchr.eop         0x1000                    # Fetch first instruction packet of program
