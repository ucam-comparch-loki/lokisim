# Set up connections to memory
ori                 r3, r0, (4,8,6,3,6)     # First memory bank, first channel, eight bank group
ori                 r4, r0, (4,8,7,3,6)     # First memory bank, second channel, eight bank group
setchmap            0,  r3                  # Set instruction fetch channel to memory bank
setchmap            1,  r4                  # Set data fetch channel to memory bank
ori                 r0, r0, 0x00360103 > 0  # Configuration command: General purpose cache, eight banks
ori                 r0, r0, 0x01000000 > 0  # Table update command instruction fetch channel
ori                 r0, r0, (4,3,1) > 0     # IPK cache of this core
ori                 r0, r0, 0x01000000 > 1  # Table update command data fetch channel
ori                 r0, r0, (4,3,7) > 1     # Last data channel of this core

# Set up connection to core(s)
ori                 r5, r0, (4,4,2)         # Connect to core which uses shifted value
setchmap            2,  r5

# Receive message when memory configuration is complete
ori                 r0, ch5, r0             # Wait for memory configuration to complete

# Fetch this core's piece of the program
fetchpst.eop        r0, 4128                # Fetch program which shifts input