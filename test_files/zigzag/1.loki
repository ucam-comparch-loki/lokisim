lli         r10, (0,0,3)
lli         r11, (0,0,2,0,0)            ; third channel of a memory
addu        r11, ch0, r11               ; receive cache configuration (and modify)
setchmapi   1,   r10                    ; core 0's input = map 1
setchmapi   2,   r11                    ; output memory = map 2

lli         r12, 0x2000                 ; tell core 0 to look for data at position 2000
addu        r0,  r12, r0         -> 1

#ori         r0,  r0,  0x01000000 > 2    ; tell memory we're about to connect
lui         r13, 0x0100
addu        r0,  r13, r0         -> 2

lli         r14, (0,1,3)                ; connect to memory
addu        r0,  r14, r0         -> 2
addu        r0,  ch1, r0                ; receive sync message from memory

lli         r15,  0x3000

stw         ch0, r15, 0          -> 2
addui       r15, r15, 4
ibjmp       -8                          ; repeat

addu.eop    r0,  r0,  r0
